# 서울시의회 회의록 시민 서비스 프로젝트

## 프로젝트 목적

일반 시민이 서울시의회 회의록을 쉽게 이해하고 접근할 수 있도록 돕는 서비스 개발

## 현재 문제점 (사용자 의견)

- 회의록 내용이 매우 길고 복잡함
- 자료가 많고 참여 인원이 많아 파악이 어려움
- 일반 시민이 필요한 정보를 찾기 어려움
- 전문 용어와 행정 용어가 많아 이해가 어려움

## 목표 기능 (사용자 요구사항)

1. **회의록 내용 요약**
   - 긴 회의록을 간단하게 요약
   - 핵심 내용만 추출

2. **쉬운 언어로 풀어내기**
   - 어려운 행정/법률 용어를 일반 용어로 변환
   - 시민 친화적인 표현으로 재작성

3. **안건 추적**
   - 본회의와 하위 회의 연결
   - 안건이 어떻게 제출되고 진행되었는지 추적
   - 최종 결론(가결/부결) 명확히 표시

4. **대화형 챗봇**
   - 이해 안 되는 부분을 질문할 수 있는 챗봇
   - 회의록 내용 기반 질의응답

## 현재 크롤링 데이터 (3가지 형식)

1. **JSON** - 구조화된 데이터 (텍스트 + 링크 분리)
2. **Markdown** - 링크가 포함된 읽기 쉬운 형식
3. **TXT** - 순수 텍스트만

## 데이터 활용 방안

### 사용자 초기 아이디어
- VectorDB 활용
- 텍스트와 메타데이터를 저장
- 관련 검색 및 유사도 기반 검색

---

## Claude의 제안

### 1. 데이터 저장 전략 (Hybrid Approach)

#### A. VectorDB (검색 + 의미 기반 매칭)
**사용 DB**: Chroma, Pinecone, Weaviate 등

**저장할 데이터**:
```json
{
  "text_chunk": "회의록 텍스트 청크 (500-1000자 단위)",
  "embedding": [벡터 임베딩],
  "metadata": {
    "meeting_title": "제332회 운영위원회 제1차",
    "meeting_date": "2025-08-27",
    "meeting_type": "운영위원회",
    "section_id": "item1",
    "section_title": "의사일정 협의의 건",
    "speakers": ["이숙자", "김용석"],
    "keywords": ["의사일정", "행정사무감사"],
    "decision": "원안가결",
    "url": "원본 URL",
    "has_attachments": true,
    "attachment_links": [...]
  }
}
```

**장점**:
- 의미 기반 검색 (유사한 내용 찾기)
- "행정사무감사 언제 하나요?" 같은 자연어 질문에 대답 가능
- RAG(Retrieval-Augmented Generation)로 챗봇 구현

#### B. 관계형 DB (PostgreSQL + 전문검색)
**저장할 데이터**:
- 회의록 메타데이터
- 안건 정보 및 관계
- 의원 정보
- 첨부파일 링크

**테이블 구조 예시**:
```sql
-- 회의록 테이블
meetings (
  id, title, date, type, url, summary
)

-- 안건 테이블
agenda_items (
  id, meeting_id, item_number, title,
  content, decision, related_attachments
)

-- 안건 추적 테이블 (본회의-하위회의 연결)
agenda_tracking (
  agenda_id, parent_meeting_id,
  child_meeting_id, status, flow_order
)

-- 발언자 테이블
speakers (
  id, name, role, profile_url
)

-- 발언 테이블
speeches (
  id, meeting_id, speaker_id, content, timestamp
)
```

**장점**:
- 안건 추적이 쉬움 (JOIN으로 연결)
- 특정 의원 발언 검색
- 날짜/회의 유형별 필터링

#### C. 추천 조합: VectorDB + PostgreSQL
- **PostgreSQL**: 메타데이터, 구조화된 정보, 안건 추적
- **VectorDB**: 전체 텍스트 임베딩, 의미 검색, RAG

---

### 2. 데이터 전처리 파이프라인

```
크롤링 데이터 (JSON)
    ↓
1. 청크 분할 (섹션별, 발언별)
    ↓
2. 메타데이터 추출
   - 회의 정보 (날짜, 제목, 유형)
   - 안건 정보 (번호, 제목, 결론)
   - 발언자 정보
   - 키워드 추출
    ↓
3. 텍스트 임베딩 생성
   - OpenAI Embeddings
   - 또는 한국어 모델 (KoSimCSE, KoBERT)
    ↓
4. 요약 생성
   - 회의록 전체 요약
   - 각 안건별 요약
   - 쉬운 말로 변환
    ↓
5. 저장
   - VectorDB: 텍스트 청크 + 임베딩 + 메타데이터
   - PostgreSQL: 구조화된 데이터
```

---

### 3. 서비스 기능별 데이터 활용

#### 기능 1: 회의록 검색
**방법**:
- 사용자 질문 → 임베딩 → VectorDB 유사도 검색
- 메타데이터 필터 (날짜, 회의 유형, 안건 종류)

**예시**:
```
질문: "2025년 행정사무감사 언제 하나요?"
→ VectorDB 검색 + metadata filter (date >= 2025, keywords contains "행정사무감사")
→ 결과 반환 + 원본 링크
```

#### 기능 2: 안건 추적
**방법**:
- PostgreSQL에서 agenda_tracking 테이블 조회
- 특정 안건의 전체 흐름을 시간순으로 표시

**예시**:
```
안건: "서울특별시의회의원 공무국외활동에 관한 조례"
→ 1. 운영위원회 제1차 (2025.08.27) - 상정
→ 2. 운영위원회 제2차 (2025.09.10) - 심의
→ 3. 본회의 (2025.09.15) - 가결
```

#### 기능 3: 요약 및 쉬운 말 풀이
**방법**:
- 전처리 단계에서 미리 생성하여 저장
- 또는 실시간 LLM 요약

**저장 형식**:
```json
{
  "original_text": "원본 회의록",
  "summary": "3줄 요약",
  "easy_explanation": "쉬운 말로 풀어낸 버전",
  "key_terms": [
    {
      "term": "원안가결",
      "explanation": "원래 제출된 안건 그대로 통과됨"
    }
  ]
}
```

#### 기능 4: 챗봇 (RAG)
**방법**:
```
사용자 질문
    ↓
1. 질문 임베딩 생성
    ↓
2. VectorDB에서 관련 문서 검색 (top 5)
    ↓
3. 검색된 문서 + 질문을 LLM에 전달
    ↓
4. LLM이 문맥 기반 답변 생성
    ↓
5. 답변 + 출처(원본 링크) 반환
```

**프롬프트 예시**:
```
당신은 서울시의회 회의록 도우미입니다.
아래 회의록 내용을 바탕으로 질문에 답변해주세요.

[검색된 회의록 내용]
...

[질문]
행정사무감사는 언제 하나요?

[답변 규칙]
- 쉬운 말로 설명
- 날짜와 기간을 명확히
- 출처 회의록 정보 포함
```

---

### 4. UI/UX 제안

#### 메인 페이지
- 검색창 (자연어 검색)
- 최신 회의록 목록
- 주요 안건 타임라인

#### 회의록 상세 페이지
```
[제목] 제332회 운영위원회 제1차

[요약]
이 회의에서는 4가지 안건을 다뤘습니다:
1. 의사일정 협의 → 통과
2. 행정사무감사 일정 결정 → 11월 4일~17일로 확정
...

[쉬운 설명]
운영위원회에서 앞으로 열릴 회의 일정과
행정기관 점검 시기를 정했습니다.

[안건 목록]
✓ 1. 의사일정 협의의 건 (원안가결)
  → 관련 회의: 없음
  → 첨부파일: [의사일정안 다운로드]

[전문 보기]
○위원장 이숙자: 의석을 정돈해...
```

#### 챗봇 인터페이스
- 우측 하단 플로팅 버튼
- 대화창에서 질문하면 관련 회의록과 답변 제공

---

### 5. 기술 스택 추천

#### 백엔드
- **Python FastAPI** - API 서버
- **PostgreSQL** - 구조화된 데이터
- **ChromaDB / Pinecone** - 벡터 검색
- **OpenAI API / Claude API** - LLM (요약, 챗봇)
- **Sentence Transformers** - 한국어 임베딩

#### 프론트엔드
- **React / Next.js** - 웹 UI
- **Tailwind CSS** - 스타일링
- **shadcn/ui** - UI 컴포넌트

#### 배포
- **Docker** - 컨테이너화
- **AWS / GCP** - 클라우드 호스팅

---

### 6. 단계별 구현 계획

#### Phase 1: 데이터 처리 (현재 단계)
- [x] 크롤러 개발
- [ ] 데이터 전처리 파이프라인
- [ ] VectorDB + PostgreSQL 설계 및 구축
- [ ] 초기 데이터 적재

#### Phase 2: 검색 및 요약
- [ ] 검색 API 개발
- [ ] 요약 생성 로직
- [ ] 용어 사전 구축

#### Phase 3: 안건 추적
- [ ] 안건 관계 파싱
- [ ] 추적 시스템 구축

#### Phase 4: 챗봇
- [ ] RAG 파이프라인 구축
- [ ] 챗봇 API 개발
- [ ] 프롬프트 최적화

#### Phase 5: 웹 서비스
- [ ] UI/UX 개발
- [ ] 통합 테스트
- [ ] 배포

---

## 다음 단계

1. **데이터 전처리 스크립트 개발**
   - JSON 파싱
   - 청크 분할
   - 메타데이터 추출

2. **DB 스키마 설계**
   - PostgreSQL 테이블 설계
   - VectorDB 컬렉션 구조 정의

3. **샘플 데이터로 POC (Proof of Concept)**
   - 소량 데이터로 검색/챗봇 테스트
   - 성능 및 정확도 검증

---

## 참고 자료

- [LangChain RAG 튜토리얼](https://python.langchain.com/docs/use_cases/question_answering/)
- [ChromaDB 문서](https://docs.trychroma.com/)
- [Korean Sentence Embeddings](https://github.com/BM-K/KoSimCSE-SKT)
